<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meta 廣告營收分析與 2025 走勢預測</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    :root {
      --meta-blue: #0668E1;
      --bg-dark: #121212;
      --card-bg: #1e1e1e;
      --text-main: #e0e0e0;
      --highlight: #00d4ff;
    }
    body {
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Microsoft JhengHei";
      background-color: var(--bg-dark);
      color: var(--text-main);
      line-height: 1.6;
      margin: 0; padding: 0;
    }
    .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
    header { text-align: center; padding: 60px 0 40px; border-bottom: 2px solid var(--meta-blue); }
    h1 { color: var(--meta-blue); margin-bottom: 10px; }
    section { margin: 40px 0; background: var(--card-bg); padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.4); }
    h2 { color: var(--highlight); border-left: 5px solid var(--meta-blue); padding-left: 15px; }

    /* D3 圖表樣式修正 */
    .chart-wrapper { text-align: center; margin: 30px 0; background: #fff; padding: 20px; border-radius: 8px; color: #333; }
    .chart-container { display: inline-block; position: relative; }
    .line { fill: none; stroke-width: 2.5px; transition: stroke-width 0.2s; }
    .dot { cursor: pointer; }
    .tooltip {
      position: absolute; background: rgba(255, 255, 255, 0.98);
      border: 1px solid #ccc; padding: 10px; font-size: 13px; color: #333;
      pointer-events: none; opacity: 0; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .legend { font-size: 13px; font-weight: bold; cursor: default; }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>Meta 廣告營收趨勢與中國廣告主影響力分析</h1>
    <p>數據更新至 2024 財報並預測至 2025 全年</p>
  </header>

  <section>
    <h2>一、 區域營收走勢 (2014-2025)</h2>
    <p>觀察下圖「亞太區 (Asia Pacific)」的橙色線條，可明顯看出 2022 年後受中國電商出海影響，營收呈現指數級成長。</p>
    
    <div class="chart-wrapper">
      <div class="chart-container">
        <svg id="meta-chart" width="850" height="450"></svg>
        <div id="tooltip" class="tooltip"></div>
      </div>
    </div>
  </section>

  <section>
    <h2>二、 關鍵發現與中國營收關聯</h2>
        <ul class="analysis-list">
      <li><strong>跨境廣告「白名單」：</strong> 為守住營收，Meta 在 2024 年策略轉向，重新允許曾因違規被封禁的中國廣告代理商（低階轉售商）獲取驗證帳號。</li>
      <li><strong>高額違規營收：</strong> 2024 年中國區廣告營收中，約有 19%（逾 30 億美元）來自於<strong>詐騙、非法賭博或色情內容</strong>等違規廣告。</li>
      <li><strong>內部監管缺失：</strong> 2025 年 12 月的調查指出，Meta 為維護營收，甚至在內部解散或削弱了專門針對中國廣告欺詐的合規團隊。</li>
    </ul>
  </section>

   <!-- 3. 軍方與附屬機構 -->
  <section>
    <h2>三、 是否涉及中國解放軍及其附屬機構？</h2>
    <p>關於「解放軍」直接注資的證據雖難以從公開財報取得，但以下事實揭示了其間接關聯：</p>
    <ul class="analysis-list">
      <li><span class="evidence-tag">大外宣行動</span> <strong>官方媒體投放：</strong> 中國政府附屬媒體（如新華社）長期支付 Meta 廣告費，向海外推播政治宣傳廣告以影響國際輿論。</li>
      <li><span class="evidence-tag">協同造假</span> <strong>影響力行動 (CIB)：</strong> Meta 曾多次移除與中國政府有關的「協作性造假行為」帳號，這些帳號常由國家補貼的公關服務機構（附屬機構）經營。</li>
      <li><span class="evidence-tag">安全漏洞</span> <strong>詐騙與認知作戰：</strong> 研究顯示，來自中國的違規廣告不僅是商業詐騙，有時也包含具政治目的之錯誤訊息投放。</li>
    </ul>
  </section>

  <footer>
    <p>本報告數據基於 Meta 公開財報及 2025 年 12 月之洩漏文件整理。<br>分析網頁設計與 D3.js 數據視覺化整合演示。</p>
  </footer>
</div>

<script>
  // 1. 直接嵌入數據，避免 JSON 讀取失敗
  const data = [
    {"year": 2014, "U.S. & Canada": 6.38, "Asia Pacific": 1.76, "Europe": 3.44, "Rest of World": 1.48},
    {"year": 2015, "U.S. & Canada": 9.24, "Asia Pacific": 2.65, "Europe": 4.9, "Rest of World": 2.06},
    {"year": 2016, "U.S. & Canada": 13.91, "Asia Pacific": 4.14, "Europe": 7.15, "Rest of World": 3.01},
    {"year": 2017, "U.S. & Canada": 19.34, "Asia Pacific": 7.02, "Europe": 9.68, "Rest of World": 4.41},
    {"year": 2018, "U.S. & Canada": 23.49, "Asia Pacific": 9.53, "Europe": 11.39, "Rest of World": 5.48},
    {"year": 2019, "U.S. & Canada": 27.26, "Asia Pacific": 11.88, "Europe": 12.01, "Rest of World": 6.55},
    {"year": 2020, "U.S. & Canada": 32.55, "Asia Pacific": 14.88, "Europe": 13.78, "Rest of World": 8.04},
    {"year": 2021, "U.S. & Canada": 56.63, "Asia Pacific": 26.74, "Europe": 31.21, "Rest of World": 14.65},
    {"year": 2022, "U.S. & Canada": 52.89, "Asia Pacific": 27.76, "Europe": 31.21, "Rest of World": 14.65},
    {"year": 2023, "U.S. & Canada": 52.89, "Asia Pacific": 36.15, "Europe": 31.21, "Rest of World": 14.65},
    {"year": 2024, "U.S. & Canada": 63.21, "Asia Pacific": 45.01, "Europe": 38.36, "Rest of World": 17.92},
    {"year": 2025, "U.S. & Canada": 68.00, "Asia Pacific": 54.00, "Europe": 42.50, "Rest of World": 24.50}
  ];

  const svg = d3.select("#meta-chart"),
        margin = { top: 40, right: 160, bottom: 50, left: 60 },
        width = +svg.attr("width") - margin.left - margin.right,
        height = +svg.attr("height") - margin.top - margin.bottom;

  const g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);

  const colors = d3.scaleOrdinal()
    .domain(["U.S. & Canada", "Asia Pacific", "Europe", "Rest of World"])
    .range(["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728"]);

  const x = d3.scaleLinear().domain(d3.extent(data, d => d.year)).range([0, width]);
  const y = d3.scaleLinear().domain([0, d3.max(data, d => Math.max(d["U.S. & Canada"], d["Asia Pacific"], d["Europe"], d["Rest of World"]))]).nice().range([height, 0]);

  // 繪製座標軸
  g.append("g").attr("transform", `translate(0,${height})`).call(d3.axisBottom(x).tickFormat(d3.format("d")));
  g.append("g").call(d3.axisLeft(y));

  const regions = ["U.S. & Canada", "Asia Pacific", "Europe", "Rest of World"];
  const lineGenerator = d3.line().x(d => x(d.year)).y(d => y(d.value));

  regions.forEach(region => {
    const regionData = data.map(d => ({ year: d.year, value: d[region] }));
    const classSafe = region.replace(/[^a-zA-Z0-9]/g, '');

    // 畫線
    const path = g.append("path")
      .datum(regionData)
      .attr("class", `line line-${classSafe}`)
      .attr("stroke", colors(region))
      .attr("d", lineGenerator);

    // 線條動畫
    const length = path.node().getTotalLength();
    path.attr("stroke-dasharray", `${length} ${length}`).attr("stroke-dashoffset", length)
        .transition().duration(2000).attr("stroke-dashoffset", 0);

    // 畫點
    g.selectAll(`.dot-${classSafe}`)
      .data(regionData).enter().append("circle")
      .attr("class", "dot")
      .attr("cx", d => x(d.year)).attr("cy", d => y(d.value)).attr("r", 4.5)
      .attr("fill", colors(region))
      .on("mouseover", function(event, d) {
        d3.select("#tooltip").style("opacity", 1)
          .html(`<strong>${region}</strong><br>年份: ${d.year}<br>營收: $${d.value}B`)
          .style("left", `${event.pageX - 350}px`).style("top", `${event.pageY - 300}px`);
        d3.select(this).attr("r", 7);
      })
      .on("mouseout", function() {
        d3.select("#tooltip").style("opacity", 0);
        d3.select(this).attr("r", 4.5);
      });

    // 圖例
    const legendRow = g.append("g").attr("transform", `translate(${width + 20}, ${regions.indexOf(region) * 25})`);
    legendRow.append("rect").attr("width", 15).attr("height", 15).attr("fill", colors(region));
    legendRow.append("text").attr("x", 25).attr("y", 12).attr("fill", colors(region)).attr("class", "legend").text(region);
  });
</script>

</body>
</html>
